<Window x:Class="Dmca.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Dmca.App.ViewModels"
        xmlns:views="clr-namespace:Dmca.App.Views"
        Title="DMCA — Driver Migration Cleanup Assistant"
        Width="1280" Height="800"
        MinWidth="960" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}">

    <Window.Resources>
        <!-- DataTemplate mapping: ViewModel → View -->
        <DataTemplate DataType="{x:Type vm:InterviewViewModel}">
            <views:InterviewView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:InventoryViewModel}">
            <views:InventoryView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ItemDetailViewModel}">
            <views:ItemDetailView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:AiChatViewModel}">
            <views:AiChatView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ProposalReviewViewModel}">
            <views:ProposalReviewView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ExecuteViewModel}">
            <views:ExecuteView />
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- ─── Sidebar ─── -->
        <Border Grid.Column="0" Background="{StaticResource SidebarBrush}">
            <DockPanel>
                <!-- App Title -->
                <StackPanel DockPanel.Dock="Top" Margin="16,20,16,24">
                    <TextBlock Text="DMCA"
                               FontSize="24" FontWeight="Bold"
                               Foreground="{StaticResource PrimaryBrush}" />
                    <TextBlock Text="Driver Migration Cleanup"
                               FontSize="11"
                               Foreground="{StaticResource SidebarTextBrush}"
                               Opacity="0.7" />
                </StackPanel>

                <!-- Status Bar -->
                <Border DockPanel.Dock="Bottom" Padding="16,10" Background="#1C2529">
                    <TextBlock Text="{Binding StatusText}"
                               Foreground="{StaticResource SidebarTextBrush}"
                               FontSize="11" Opacity="0.6"
                               TextTrimming="CharacterEllipsis" />
                </Border>

                <!-- Navigation -->
                <ItemsControl ItemsSource="{Binding NavigationItems}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate DataType="{x:Type vm:NavigationItem}">
                            <Button Content="{Binding Label}"
                                    Command="{Binding DataContext.NavigateToCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                    CommandParameter="{Binding}">
                                <Button.Style>
                                    <Style TargetType="Button" BasedOn="{StaticResource SidebarButton}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsActive}" Value="True">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="#37474F"
                                                                    Padding="16,12"
                                                                    BorderThickness="3,0,0,0"
                                                                    BorderBrush="{StaticResource PrimaryBrush}">
                                                                <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center" />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </DockPanel>
        </Border>

        <!-- ─── Content Area ─── -->
        <ContentControl Grid.Column="1"
                         Content="{Binding CurrentPage}"
                         Margin="0" />
    </Grid>
</Window>
